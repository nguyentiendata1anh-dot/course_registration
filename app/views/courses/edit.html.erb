<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
  body { font-family: 'Segoe UI', sans-serif; background: #f0f4f8; margin: 0; }
  .admin-header { background: #343a40; color: white; padding: 20px; text-align: center; margin-bottom: 20px; }
  .admin-header h1 { margin: 0; font-size: 28px; }
  .container { max-width: 700px; margin: 20px auto; padding: 0 20px; }
  .form-card { background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
  .form-card h2 { color: #0056b3; margin-bottom: 20px; text-align: center; }
  .form-group { margin-bottom: 15px; }
  .form-group label { display: block; font-weight: 600; color: #333; margin-bottom: 5px; }
  .form-control, .form-select { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; font-size: 14px; }
  .form-control:focus, .form-select:focus { outline: none; border-color: #007bff; box-shadow: 0 0 5px rgba(0,123,255,0.3); }
  .btn-submit { background: #28a745; color: white; border: none; padding: 12px; width: 100%; cursor: pointer; font-weight: bold; border-radius: 4px; font-size: 16px; margin-top: 10px; }
  .btn-submit:hover { background: #218838; }
  .error-msg { background: #f8d7da; color: #721c24; padding: 15px; border-radius: 4px; margin-bottom: 15px; }
  .error-msg h3 { margin-top: 0; }
  .back-link { text-align: center; margin-top: 15px; }
  .back-link a { color: #6c757d; text-decoration: none; }
  .back-link a:hover { color: #495057; }
  .form-row { display: flex; gap: 15px; }
  .form-row .form-group { flex: 1; margin-bottom: 0; }
</style>

<div class="admin-header">
  <h1>Ch·ªânh s·ª≠a m√¥n h·ªçc</h1>
</div>

<div class="container">
  <div class="form-card">
    <%= form_with(model: @course, url: admin_course_path(@course), method: :patch, local: true) do |form| %>
      <% if @course.errors.any? %>
        <div class="error-msg">
          <h3><%= pluralize(@course.errors.count, "l·ªói") %> khi l∆∞u m√¥n h·ªçc:</h3>
          <ul style="margin: 10px 0 0;">
            <% @course.errors.each do |error| %>
              <li><%= error.full_message %></li>
            <% end %>
          </ul>
        </div>
      <% end %>

      <div class="form-group">
        <%= form.label :code, "M√£ m√¥n" %>
        <%= form.text_field :code, class: "form-control", placeholder: "VD: CS101" %>
      </div>

      <div class="form-group">
        <%= form.label :name, "T√™n m√¥n h·ªçc" %>
        <%= form.text_field :name, class: "form-control", placeholder: "T√™n m√¥n h·ªçc..." %>
      </div>

      <div class="form-group">
        <%= form.label :term_id, "K·ª≥ h·ªçc" %>
        <%= form.collection_select :term_id, Term.all.order(start_date: :desc), :id, :name, { include_blank: "Ch·ªçn k·ª≥ h·ªçc" }, class: "form-select" %>
      </div>

      <div class="form-group">
        <%= form.label :teacher_name, "Gi·∫£ng vi√™n" %>
        <%= form.text_field :teacher_name, class: "form-control", placeholder: "T√™n gi·∫£ng vi√™n..." %>
      </div>

      <div class="form-row">
        <div class="form-group">
          <%= form.label :room, "Ph√≤ng h·ªçc" %>
          <%= form.text_field :room, class: "form-control", placeholder: "VD: A101" %>
        </div>
        <div class="form-group">
          <%= form.label :schedule, "Ghi ch√∫ l·ªãch" %>
          <%= form.text_field :schedule, class: "form-control", placeholder: "Ghi ch√∫..." %>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <%= form.label :day_of_week, "Ng√†y h·ªçc" %>
          <%= form.select :day_of_week, 
              { "Th·ª© 2 (Monday)" => "monday", "Th·ª© 3 (Tuesday)" => "tuesday", "Th·ª© 4 (Wednesday)" => "wednesday", 
                "Th·ª© 5 (Thursday)" => "thursday", "Th·ª© 6 (Friday)" => "friday", "Th·ª© 7 (Saturday)" => "saturday", "CN (Sunday)" => "sunday" },
              { include_blank: "Ch·ªçn ng√†y..." },
              class: "form-select" %>
        </div>
        <div class="form-group">
          <%= form.label :start_time, "Gi·ªù b·∫Øt ƒë·∫ßu" %>
          <%= form.time_field :start_time, class: "form-control" %>
        </div>
        <div class="form-group">
          <%= form.label :end_time, "Gi·ªù k·∫øt th√∫c" %>
          <%= form.time_field :end_time, class: "form-control" %>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <%= form.label :credits, "T√≠n ch·ªâ" %>
          <%= form.number_field :credits, class: "form-control", placeholder: "3" %>
        </div>
        <div class="form-group">
          <%= form.label :capacity, "Sƒ© s·ªë t·ªëi ƒëa" %>
          <%= form.number_field :capacity, class: "form-control", placeholder: "40" %>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <%= form.label :start_date, "üìÖ Ng√†y b·∫Øt ƒë·∫ßu m√¥n" %>
          <%= form.date_field :start_date, class: "form-control" %>
        </div>
        <div class="form-group">
          <%= form.label :end_date, "üìÖ Ng√†y k·∫øt th√∫c m√¥n" %>
          <%= form.date_field :end_date, class: "form-control" %>
        </div>
      </div>

      <div class="form-group" style="color:#555; font-size:13px;">
        H·∫°n ƒëƒÉng k√Ω s·∫Ω t·ª± ƒë·ªông = ng√†y b·∫Øt ƒë·∫ßu + 7 ng√†y. (B·∫°n c√≥ th·ªÉ ch·ªânh `deadline` th·ªß c√¥ng n·∫øu c·∫ßn trong model ho·∫∑c console.)
      </div>

      <div class="form-group">
        <%= form.label :prerequisite, "üìå M√¥n h·ªçc ti√™n quy·∫øt" %>
        <%= form.select :prerequisite, 
          options_from_collection_for_select(Course.all, :code, :name, @course.prerequisite),
          { include_blank: "Kh√¥ng c√≥ ti√™n quy·∫øt" },
          class: "form-select" %>
      </div>

      <div class="form-group">
        <%= form.label :description, "üìñ M√¥ t·∫£ chi ti·∫øt" %>
        <%= form.text_area :description, rows: 4, class: "form-control", placeholder: "N·ªôi dung chi ti·∫øt m√¥n h·ªçc..." %>
      </div>

      <%= form.submit "üíæ C·∫≠p nh·∫≠t m√¥n h·ªçc", class: "btn-submit" %>
    <% end %>

    <div class="back-link">
      <%= link_to "‚Üê Quay l·∫°i admin", admin_root_path %>
    </div>
  </div>
</div>
